<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  </head>
  <body></body>
  <script>
    // web3 : RPC 통신을 편하게 사용할 수 있게 도움. 이더리움 제단에서 지원
    const web3 = new Web3("http://127.0.0.1:8545");

    web3.eth
      .getBalance("0xfa1c0DA9893C3a01028DE340cE515722AAE3891C")
      .then((data) => {
        console.log(data);
        // wei 단위를 eth 단위로 변경
        const value = web3.utils.fromWei(data);
        console.log(value);
      });

    // web3.eth
    //   .getBalance("0x33A47c90cE5DA4886F50031AaEd14Fa767A99D32")
    //   .then(console.log);

    web3.eth
      .sendTransaction({
        from: "0xfa1c0DA9893C3a01028DE340cE515722AAE3891C",
        to: "0x33A47c90cE5DA4886F50031AaEd14Fa767A99D32",
        // eth 단위를 wei 단위로 변경
        value: web3.utils.toWei("1", "ether"),
      })
      .then(console.log);

    // CA 생성
    // solidity로 작성한 코드를 스마트 컨트랙트로 배포
    web3.eth
      .sendTransaction({
        from: "0xfa1c0DA9893C3a01028DE340cE515722AAE3891C",
        gas: "500000",
        data: "60806040523480156100115760006000fd5b505b5b610019565b61016b806100286000396000f3fe60806040523480156100115760006000fd5b506004361061003b5760003560e01c806320965255146100415780633451b48c1461005f5761003b565b60006000fd5b61004961007b565b60405161005691906100f2565b60405180910390f35b610079600480360381019061007491906100b7565b61008d565b005b6000600060005054905061008a565b90565b8060006000508190909055505b5056610134565b6000813590506100b081610119565b5b92915050565b6000602082840312156100ca5760006000fd5b60006100d8848285016100a1565b9150505b92915050565b6100eb8161010e565b82525b5050565b600060208201905061010760008301846100e2565b5b92915050565b60008190505b919050565b6101228161010e565b811415156101305760006000fd5b5b50565bfea26469706673582212204f2dbb20dac2b446c6e8313e5bdb4dd34943fa9cb7310e42c150d1af72b5689964736f6c63430008000033",
      })
      .then(console.log);

    // call과 send
    // 트랜잭션을 발생시킬때는 send
    // 조회 할때는 call로 값을 조회

    // gas 측정
    // solc을 사용하여 생성된 바이트 코드 입력
    web3.eth
      .estimateGas({
        data: "0x60806040523480156100115760006000fd5b505b5b610019565b61016b806100286000396000f3fe60806040523480156100115760006000fd5b506004361061003b5760003560e01c806320965255146100415780633451b48c1461005f5761003b565b60006000fd5b61004961007b565b60405161005691906100f2565b60405180910390f35b610079600480360381019061007491906100b7565b61008d565b005b6000600060005054905061008a565b90565b8060006000508190909055505b5056610134565b6000813590506100b081610119565b5b92915050565b6000602082840312156100ca5760006000fd5b60006100d8848285016100a1565b9150505b92915050565b6100eb8161010e565b82525b5050565b600060208201905061010760008301846100e2565b5b92915050565b60008190505b919050565b6101228161010e565b811415156101305760006000fd5b5b50565bfea26469706673582212204f2dbb20dac2b446c6e8313e5bdb4dd34943fa9cb7310e42c150d1af72b5689964736f6c63430008000033",
      })
      .then(console.log);
  </script>
</html>
